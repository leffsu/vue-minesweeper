(function(e){function t(t){for(var r,i,c=t[0],a=t[1],l=t[2],p=0,b=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&b.push(s[i][0]),s[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var a=n[c];0!==s[a]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/portfolio-sapper/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),s=n.n(r);s.a},5120:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=(n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),n("2f62"));r["a"].use(s["a"]);var o=new s["a"].Store({state:{settings:{rowsNumber:9,colsNumber:9,bombsNumber:10},popUp:null,cells:[],bombsIndexes:[],stage:"start",checkedCellsCounter:0,flagsCounter:0},getters:{getAreaSerialIndexes:function(e){return function(t){for(var n=[],r=-1;r<=1;r++){var s=t.row+r;if(!(s<0||s>e.settings.rowsNumber-1))for(var o=-1;o<=1;o++)if(0!=r||0!=o){var i=t.col+o;i<0||i>e.settings.colsNumber-1||n.push(s*e.settings.colsNumber+i)}}return n}}},mutations:{updateCells:function(e,t){e.cells=t},setStage:function(e,t){e.stage=t},toCheckCell:function(e,t){t.isChecked=!0,e.checkedCellsCounter++},updateBombsSystem:function(e,t){var n=e.cells,r=!0,s=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var a=i.value;n[a].status=-1,e.bombsIndexes.push(a);var l=this.getters.getAreaSerialIndexes(n[a]),u=!0,p=!1,b=void 0;try{for(var f,h=l[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,m=n[d];-1!=m.status&&m.status++}}catch(g){p=!0,b=g}finally{try{u||null==h.return||h.return()}finally{if(p)throw b}}}}catch(g){s=!0,o=g}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}},reset:function(e,t){if(e.bombsIndexes=[],this.commit("setStage","start"),e.checkedCellsCounter=0,e.flagsCounter=0,t)e.cells=[];else{var n=!0,r=!1,s=void 0;try{for(var o,i=e.cells[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c.isChecked=!1,c.isFlagged=!1,c.status=0}}catch(a){r=!0,s=a}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}}},toggleFlag:function(e,t){t.isFlagged?e.flagsCounter--:e.flagsCounter++,t.isFlagged=!t.isFlagged},toLose:function(e,t){e.stage="losing",t.status=-2;var n=!0,r=!1,s=void 0;try{for(var o,i=e.bombsIndexes[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;e.cells[c].isChecked=!0}}catch(a){r=!0,s=a}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}},toWin:function(e){e.stage="win"},setPopUp:function(e,t){e.popUp=t},updateSettings:function(e,t){Object.assign(e.settings,t)}}}),i=o,c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App",attrs:{id:"App"}},[n("TheTopPanel"),n("div",{staticClass:"App__field-stage"},[n("TheGameField")],1),n("transition",{attrs:{name:"fade"}},[e.popUp?n("PopUp"):e._e()],1)],1)},a=[],l=(n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TheTopPanel"},[n("div",{staticClass:"TheTopPanel__button TheTopPanel__button_settings",on:{click:function(t){return e.setPopUp("settings")}}}),n("h2",{staticClass:"TheTopPanel__counter TheTopPanel__counter_flags"},[e._v(" "+e._s(e.flagsLeft)+" ")]),n("div",{staticClass:"TheTopPanel__button",class:[e.restartButtonClass],on:{click:e.restart}}),n("h2",{staticClass:"TheTopPanel__counter TheTopPanel__counter_time"},[e._v(" "+e._s(e.time)+" ")]),n("div",{staticClass:"TheTopPanel__button TheTopPanel__button_ref"})])},p=[];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={computed:f({},Object(s["d"])({rowsNumber:function(e){return e.settings.rowsNumber},colsNumber:function(e){return e.settings.colsNumber}})),methods:f({},Object(s["c"])(["updateCells"]),{fieldGenerator_generateField:function(){for(var e=[],t=0;t<this.rowsNumber;t++)for(var n=0;n<this.colsNumber;n++){var r={row:t,col:n,status:0,isChecked:!1,isFlagged:!1};e.push(r)}this.updateCells(e)}})};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"TheTopPanel",mixins:[h],data:function(){return{time:0,timerId:null,restartButtonClass:"TheTopPanel__button_thinking"}},computed:m({},Object(s["d"])({stage:"stage",bombsNumber:function(e){return e.settings.bombsNumber},flagsCounter:"flagsCounter"}),{flagsLeft:function(){return this.bombsNumber-this.flagsCounter}}),watch:{stage:function(e){var t=this;switch(e){case"win":this.restartButtonClass="TheTopPanel__button_cool",clearInterval(this.timerId);break;case"losing":this.restartButtonClass="TheTopPanel__button_angry",clearInterval(this.timerId);break;case"start":this.restartButtonClass="TheTopPanel__button_thinking",clearInterval(this.timerId),this.time=0;break;case"game":this.restartButtonClass="TheTopPanel__button_thinking",this.timerId=setInterval((function(){return t.time++}),1e3);break}}},created:function(){var e=this;window.addEventListener("keyup",(function(t){"F2"==t.code&&e.restart()}))},methods:m({},Object(s["c"])(["setPopUp","updateCells","reset"]),{restart:function(){this.reset(),this.fieldGenerator_generateField()}})},v=g,_=(n("bd8c"),n("2877")),O=Object(_["a"])(v,u,p,!1,null,null,null),y=O.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TheGameField",style:{gridTemplateRows:"repeat("+e.settings.rowsNumber+", 30px)",gridTemplateColumns:"repeat("+e.settings.colsNumber+", 30px)"}},e._l(e.$store.state.cells,(function(t,r){return n("CellItem",{key:r,attrs:{cell:t,isLighted:e.lightedCellIndexes.includes(r)},nativeOn:{click:function(n){return e.selectCell(t)},contextmenu:function(n){return e.alternativeSelectCell(t)}}})})),1)},C=[],j=(n("caad"),n("2532"),n("2909")),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CellItem",class:{CellItem_lighted_green:e.isLighted&&-1!=e.cell.status,CellItem_lighted_red:e.isLighted&&-1==e.cell.status,CellItem_checked:e.cell.isChecked,CellItem_flag:e.cell.isFlagged,CellItem_explosion:-2==e.cell.status,CellItem_bomb:e.cell.isChecked&&-1==e.cell.status}},[e._v(" "+e._s(e.cell.isChecked&&e.cell.status>0?e.cell.status:null)+" ")])},N=[],T={name:"CellItem",props:{cell:Object,isLighted:Boolean}},k=T,x=(n("766f"),Object(_["a"])(k,w,N,!1,null,null,null)),S=x.exports;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={name:"TheGameField",components:{CellItem:S},mixins:[h],data:function(){return{lightedCellIndexes:[],lightingTimer:null}},computed:U({},Object(s["d"])(["settings","stage","cells","checkedCellsCounter","bombsIndexes"]),{},Object(s["b"])(["getAreaSerialIndexes"]),{isWin:function(){var e=this.cells.length-this.checkedCellsCounter;return e==this.bombsIndexes.length}}),watch:{stage:function(){this.lightedCellIndexes=[],clearTimeout(this.lightingTimer)}},created:function(){this.fieldGenerator_generateField()},methods:U({},Object(s["c"])(["toggleFlag","toLose","toCheckCell","toWin","setStage","updateBombsSystem"]),{alternativeSelectCell:function(e){var t=this;if("losing"!=this.stage&&"win"!=this.stage)if(e.isChecked){var n;if(0!=this.lightedCellIndexes.length)return;(n=this.lightedCellIndexes).push.apply(n,Object(j["a"])(this.getAreaSerialIndexes(e))),this.lightingTimer=setTimeout((function(){return t.lightedCellIndexes=[]}),1e4)}else this.toggleFlag(e)},selectCell:function(e){var t=this.stage;e.isFlagged||"losing"==t||"win"==t||("start"==this.stage&&(this.setStage("game"),this.installBombs(e)),-1==e.status&&this.toLose(e),this.openCells(e),this.isWin&&this.toWin())},installBombs:function(e){var t=this.getAreaSerialIndexes(e),n=[],r=this.cells;t.push(e.row*this.settings.colsNumber+e.col);while(n.length<this.settings.bombsNumber){var s=Math.floor(Math.random()*r.length);t.includes(s)||n.includes(s)||n.push(s)}this.updateBombsSystem(n)},openCells:function(e){var t=[e.row*this.settings.colsNumber+e.col],n=this.cells;while(t.length>0){var r=n[t[t.length-1]];t.pop(),r.isChecked||(0==r.status&&t.push.apply(t,Object(j["a"])(this.getAreaSerialIndexes(r))),this.toCheckCell(r),r.isFlagged&&this.toggleFlag(r))}}})},E=D,F=(n("7308"),Object(_["a"])(E,P,C,!1,null,null,null)),B=F.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"PopUp"},[n("div",{staticClass:"PopUp__window"},[n("h2",{staticClass:"PopUp__title"},[e._v("Settings")]),n("div",{staticClass:"PopUp__section"},[n("button",{staticClass:"PopUp__button PopUp__button_difficulty",on:{click:function(t){return e.selectDifficulty("Easy")}}},[e._v(" Easy ")]),n("button",{staticClass:"PopUp__button PopUp__button_difficulty",on:{click:function(t){return e.selectDifficulty("Medium")}}},[e._v(" Medium ")]),n("button",{staticClass:"PopUp__button PopUp__button_difficulty",on:{click:function(t){return e.selectDifficulty("Expert")}}},[e._v(" Expert ")])]),n("div",{staticClass:"PopUp__section PopUp__section_input"},[e._v(" Width: "),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.colsNumber,expression:"cache.colsNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUp__input",attrs:{type:"number"},domProps:{value:e.cache.colsNumber},on:{change:[function(t){e.$set(e.cache,"colsNumber",e._n(t.target.value))},function(t){e.validateCache("colsNumber",9,100),e.validateCache("bombsNumber",10,e.cacheBombsLimit)}],blur:function(t){return e.$forceUpdate()}}}),e._v(" Height: "),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.rowsNumber,expression:"cache.rowsNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUp__input",attrs:{type:"number"},domProps:{value:e.cache.rowsNumber},on:{change:[function(t){e.$set(e.cache,"rowsNumber",e._n(t.target.value))},function(t){e.validateCache("rowsNumber",9,100),e.validateCache("bombsNumber",10,e.cacheBombsLimit)}],blur:function(t){return e.$forceUpdate()}}}),e._v(" Bombs: "),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.bombsNumber,expression:"cache.bombsNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUp__input",attrs:{type:"number"},domProps:{value:e.cache.bombsNumber},on:{change:[function(t){e.$set(e.cache,"bombsNumber",e._n(t.target.value))},function(t){return e.validateCache("bombsNumber",10,e.cacheBombsLimit)}],blur:function(t){return e.$forceUpdate()}}})]),n("div",{staticClass:"PopUp__section PopUp__section_confirm-buttons"},[n("button",{staticClass:"PopUp__button PopUp__button_confirm",on:{click:function(t){e.updateSettings(e.cache),e.restart(!0),e.setPopUp(null)}}},[e._v(" Ok ")]),n("button",{staticClass:"PopUp__button PopUp__button_confirm",on:{click:function(t){return e.setPopUp(null)}}},[e._v(" Cancel ")])])])])},$=[];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={name:"PopUp",mixins:[h],data:function(){return{cache:{rowsNumber:null,colsNumber:null,bombsNumber:null}}},computed:M({},Object(s["d"])(["settings"]),{cacheBombsLimit:function(){return this.cache.colsNumber*this.cache.rowsNumber-9}}),created:function(){Object.assign(this.cache,this.settings)},methods:M({},Object(s["c"])(["setPopUp","updateSettings","reset"]),{selectDifficulty:function(e){switch(e){case"Easy":this.cache={rowsNumber:9,colsNumber:9,bombsNumber:10};break;case"Medium":this.cache={rowsNumber:16,colsNumber:16,bombsNumber:40};break;case"Expert":this.cache={rowsNumber:16,colsNumber:30,bombsNumber:99};break}},validateCache:function(e,t,n){var r=this.cache;r[e]<t&&(r[e]=t),r[e]>n&&(r[e]=n)},restart:function(){this.reset(!0),this.fieldGenerator_generateField()}})},z=G,W=(n("d8b2"),Object(_["a"])(z,L,$,!1,null,null,null)),J=W.exports;function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={name:"App",components:{TheTopPanel:y,TheGameField:B,PopUp:J},computed:R({},Object(s["d"])(["popUp"])),created:function(){window.addEventListener("contextmenu",(function(e){e.preventDefault()}))}},K=q,Q=(n("034f"),n("d233"),Object(_["a"])(K,c,a,!1,null,"53e0542c",null)),V=Q.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(V)},store:i}).$mount("#app")},7308:function(e,t,n){"use strict";var r=n("8e4e"),s=n.n(r);s.a},"766f":function(e,t,n){"use strict";var r=n("b3c2"),s=n.n(r);s.a},"85ec":function(e,t,n){},"8e4e":function(e,t,n){},ad11:function(e,t,n){},b3c2:function(e,t,n){},bd8c:function(e,t,n){"use strict";var r=n("5120"),s=n.n(r);s.a},c408:function(e,t,n){},d233:function(e,t,n){"use strict";var r=n("c408"),s=n.n(r);s.a},d8b2:function(e,t,n){"use strict";var r=n("ad11"),s=n.n(r);s.a}});
//# sourceMappingURL=app.9b33a91c.js.map