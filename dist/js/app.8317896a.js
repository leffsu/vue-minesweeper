(function(e){function t(t){for(var r,a,o=t[0],l=t[1],c=t[2],p=0,f=[];p<o.length;p++)a=o[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vue-minesweeper/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),s=n.n(r);s.a},"20a4":function(e,t,n){},3708:function(e,t,n){"use strict";var r=n("20a4"),s=n.n(r);s.a},5120:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=(n("a4d3"),n("e01a"),n("d28b"),n("fb6a"),n("a434"),n("d3b7"),n("3ca3"),n("ddb0"),n("2f62"));r["a"].use(s["a"]);var i=new s["a"].Store({state:{settings:{rowsNumber:9,colsNumber:9,minesNumber:10},cellSize:30,popUp:null,cells:[],minesIndexes:[],stage:"start",checkedCellsCounter:0,flagsCounter:0},getters:{getAreaSerialIndexes:function(e){return function(t){for(var n=[],r=-1;r<=1;r++){var s=t.row+r;if(!(s<0||s>e.settings.rowsNumber-1))for(var i=-1;i<=1;i++)if(0!=r||0!=i){var a=t.col+i;a<0||a>e.settings.colsNumber-1||n.push(s*e.settings.colsNumber+a)}}return n}}},mutations:{updateCells:function(e,t){e.cells=t},setStage:function(e,t){e.stage=t},toCheckCell:function(e,t){t.isChecked=!0,e.checkedCellsCounter++},updateMinesSystem:function(e,t){var n=this.getters.getAreaSerialIndexes,r=e.cells,s=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var c=o.value;r[c].status=-1,e.minesIndexes.push(c);var u=n(r[c]).slice(),p=!0,f=!1,h=void 0;try{for(var d,b=u[Symbol.iterator]();!(p=(d=b.next()).done);p=!0){var m=d.value,g=r[m];-1!=g.status&&g.status++}}catch(v){f=!0,h=v}finally{try{p||null==b.return||b.return()}finally{if(f)throw h}}}}catch(v){i=!0,a=v}finally{try{s||null==l.return||l.return()}finally{if(i)throw a}}},reset:function(e,t){if(e.minesIndexes.splice(0,e.minesIndexes.length),this.commit("setStage","start"),e.checkedCellsCounter=0,e.flagsCounter=0,t)e.cells.splice(0,e.cells.length);else{var n=!0,r=!1,s=void 0;try{for(var i,a=e.cells[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var o=i.value;o.isChecked=!1,o.isFlagged=!1,o.status=0}}catch(l){r=!0,s=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}}},toggleFlag:function(e,t){t.isFlagged?e.flagsCounter--:e.flagsCounter++,t.isFlagged=!t.isFlagged},toLose:function(e,t){e.stage="losing",t.status=-2;var n=!0,r=!1,s=void 0;try{for(var i,a=e.minesIndexes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var o=i.value;e.cells[o].isChecked=!0}}catch(l){r=!0,s=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}},toWin:function(e){e.stage="win"},setPopUp:function(e,t){e.popUp=t},updateSettings:function(e,t){Object.assign(e.settings,t)},updateCellSize:function(e,t){e.cellSize=t}}}),a=i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App",attrs:{id:"App"}},[n("TheTopPanel"),n("div",{staticClass:"App__field-stage"},[n("TheGameField")],1),n("transition",{attrs:{name:"fade"}},["settings"==e.popUp?n("PopUpSettings"):e._e()],1)],1)},l=[],c=(n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TheTopPanel"},[n("div",{staticClass:"TheTopPanel__button TheTopPanel__button_settings",on:{click:function(t){return e.setPopUp("settings")}}}),n("h2",{staticClass:"TheTopPanel__counter TheTopPanel__counter_flags"},[e._v(e._s(e.flagsLeft))]),n("div",{staticClass:"TheTopPanel__button",class:[e.restartButtonClass],on:{click:function(t){return e.reset()}}}),n("h2",{staticClass:"TheTopPanel__counter TheTopPanel__counter_time"},[e._v(e._s(e.time))]),n("div",{staticClass:"TheTopPanel__element-container"},[e.isSizeSliderVisible?n("div",{staticClass:"TheTopPanel__size-slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sizeSliderValue,expression:"sizeSliderValue",modifiers:{number:!0}}],staticClass:"TheTopPanel__size-slider",attrs:{type:"range",min:"30",max:"60",step:"10"},domProps:{value:e.sizeSliderValue},on:{input:function(t){return e.updateCellSize(e.sizeSliderValue)},__r:function(t){e.sizeSliderValue=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}})]):e._e(),n("div",{staticClass:"TheTopPanel__button TheTopPanel__button_resize",on:{click:function(t){e.isSizeSliderVisible=!e.isSizeSliderVisible}}})])])},p=[];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d,b,m={name:"TheTopPanel",data:function(){return{time:0,timerId:null,restartButtonClass:"TheTopPanel__button_thinking",isSizeSliderVisible:!1,sizeSliderValue:30}},computed:h({},Object(s["d"])({stage:"stage",minesNumber:function(e){return e.settings.minesNumber},flagsCounter:"flagsCounter"}),{flagsLeft:function(){return this.minesNumber-this.flagsCounter}}),watch:{stage:function(e){var t=this;switch(e){case"win":this.restartButtonClass="TheTopPanel__button_cool",clearInterval(this.timerId);break;case"losing":this.restartButtonClass="TheTopPanel__button_angry",clearInterval(this.timerId);break;case"start":this.restartButtonClass="TheTopPanel__button_thinking",clearInterval(this.timerId),this.time=0;break;case"game":this.restartButtonClass="TheTopPanel__button_thinking",this.timerId=setInterval((function(){return t.time++}),1e3);break}}},created:function(){var e=this;window.addEventListener("keyup",(function(t){"F2"==t.code&&e.reset()}))},methods:h({},Object(s["c"])(["setPopUp","reset","updateCellSize"]))},g=m,v=(n("bd8c"),n("2877")),_=Object(v["a"])(g,u,p,!1,null,null,null),O=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TheGameField",style:e.TheGameFieldStyles},e._l(e.$store.state.cells,(function(t,r){return n("CellItem",{key:r,attrs:{cell:t,isLighted:e.lightedCellIndexes.includes(r),stage:e.stage},on:{click:function(n){return e.selectCell(t)},contextmenu:function(n){return e.alternativeSelectCell(t)}}})})),1)},P=[],C=(n("99af"),n("caad"),n("2532"),n("2909")),w={name:"CellItem",functional:!0,props:{cell:Object,isLighted:Boolean,stage:String},render:function(e,t){var n=t.props.isLighted,r=t.props.cell,s=t.props.stage,i="win"==s||"losing"==s,a=["CellItem"];return n&&(-1==r.status?a.push("CellItem_lighted_red"):a.push("CellItem_lighted_green")),r.isChecked&&(a.push("CellItem_checked"),-1==r.status&&a.push("CellItem_mine")),-2==r.status&&a.push("CellItem_explosion"),r.isFlagged&&(a.push("CellItem_flag"),i&&r.status>-1&&a.push("CellItem_mistake")),e("div",{class:a,on:t.listeners},r.isChecked&&r.status>0?r.status:null)}},j=w,S=(n("766f"),Object(v["a"])(j,d,b,!1,null,null,null)),T=S.exports;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={computed:x({},Object(s["d"])({rowsNumber:function(e){return e.settings.rowsNumber},colsNumber:function(e){return e.settings.colsNumber}})),methods:x({},Object(s["c"])(["updateCells"]),{fieldGenerator_generateField:function(){for(var e=[],t=0;t<this.rowsNumber;t++)for(var n=0;n<this.colsNumber;n++){var r={row:t,col:n,status:0,isChecked:!1,isFlagged:!1};e.push(r)}this.updateCells(e)}})};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={name:"TheGameField",components:{CellItem:T},mixins:[k],data:function(){return{lightedCellIndexes:[],lightingTimer:null}},computed:I({},Object(s["d"])(["settings","stage","cells","checkedCellsCounter","minesIndexes","cellSize"]),{},Object(s["b"])(["getAreaSerialIndexes"]),{isWin:function(){var e=this.cells.length-this.checkedCellsCounter;return e==this.minesIndexes.length},TheGameFieldStyles:function(){return{gridTemplateRows:"repeat(".concat(this.settings.rowsNumber,", ").concat(this.cellSize,"px)"),gridTemplateColumns:"repeat(".concat(this.settings.colsNumber,", ").concat(this.cellSize,"px)"),fontSize:"".concat(this.cellSize/30,"em")}}}),watch:{stage:function(){this.lightedCellIndexes=[],clearTimeout(this.lightingTimer)}},created:function(){this.fieldGenerator_generateField()},methods:I({},Object(s["c"])(["toggleFlag","toLose","toCheckCell","toWin","setStage","updateMinesSystem"]),{alternativeSelectCell:function(e){var t=this;if("losing"!=this.stage&&"win"!=this.stage)if(e.isChecked){var n;if(0!=this.lightedCellIndexes.length)return;(n=this.lightedCellIndexes).push.apply(n,Object(C["a"])(this.getAreaSerialIndexes(e))),this.lightingTimer=setTimeout((function(){return t.lightedCellIndexes=[]}),1e4)}else this.toggleFlag(e)},selectCell:function(e){var t=this.stage;e.isFlagged||"losing"==t||"win"==t||("start"==this.stage&&(this.setStage("game"),this.installMines(e)),-1==e.status&&this.toLose(e),this.openCells(e),this.isWin&&this.toWin())},installMines:function(e){var t=this.getAreaSerialIndexes(e).slice(),n=[],r=this.cells;t.push(e.row*this.settings.colsNumber+e.col);while(n.length<this.settings.minesNumber){var s=Math.floor(Math.random()*r.length);t.includes(s)||n.includes(s)||n.push(s)}this.updateMinesSystem(n)},openCells:function(e){var t=[e.row*this.settings.colsNumber+e.col],n=this.cells;while(t.length>0){var r=n[t[t.length-1]];t.pop(),r.isChecked||(0==r.status&&t.push.apply(t,Object(C["a"])(this.getAreaSerialIndexes(r))),this.toCheckCell(r),r.isFlagged&&this.toggleFlag(r))}}})},D=z,E=(n("7308"),Object(v["a"])(D,y,P,!1,null,null,null)),B=E.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BasePopUp",{staticClass:"PopUpSettings"},[n("h2",{staticClass:"PopUpSettings__title"},[e._v("Settings")]),n("div",{staticClass:"PopUpSettings__section"},[n("button",{staticClass:"BasePopUp__button BasePopUp__button_small",on:{click:function(t){return e.selectDifficulty("Easy")}}},[e._v("Easy")]),n("button",{staticClass:"BasePopUp__button BasePopUp__button_small",on:{click:function(t){return e.selectDifficulty("Medium")}}},[e._v("Medium")]),n("button",{staticClass:"BasePopUp__button BasePopUp__button_small",on:{click:function(t){return e.selectDifficulty("Expert")}}},[e._v("Expert")])]),n("div",{staticClass:"PopUpSettings__section PopUpSettings__section_inputs"},[e._v("Width"),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.colsNumber,expression:"cache.colsNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUpSettings__input",attrs:{type:"number"},domProps:{value:e.cache.colsNumber},on:{change:[function(t){e.$set(e.cache,"colsNumber",e._n(t.target.value))},function(t){return e.validateCache("colsNumber","minesNumber")}],blur:function(t){return e.$forceUpdate()}}}),e._v("Height"),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.rowsNumber,expression:"cache.rowsNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUpSettings__input",attrs:{type:"number"},domProps:{value:e.cache.rowsNumber},on:{change:[function(t){e.$set(e.cache,"rowsNumber",e._n(t.target.value))},function(t){return e.validateCache("rowsNumber","minesNumber")}],blur:function(t){return e.$forceUpdate()}}}),e._v("Mines"),n("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.cache.minesNumber,expression:"cache.minesNumber",modifiers:{lazy:!0,number:!0}}],staticClass:"PopUpSettings__input",attrs:{type:"number"},domProps:{value:e.cache.minesNumber},on:{change:[function(t){e.$set(e.cache,"minesNumber",e._n(t.target.value))},function(t){return e.validateCache("minesNumber")}],blur:function(t){return e.$forceUpdate()}}})]),n("div",{staticClass:"PopUpSettings__section"},[n("button",{staticClass:"BasePopUp__button BasePopUp__button_big",on:{click:function(t){return e.confirmChanges()}}},[e._v("Ok")]),n("button",{staticClass:"BasePopUp__button BasePopUp__button_big",on:{click:function(t){return e.setPopUp(null)}}},[e._v("Cancel")])])])},M=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"BasePopUp"},[n("div",{staticClass:"BasePopUp__window"},[e._t("default")],2)])},L=[],A={name:"BasePopUp"},V=A,G=(n("3708"),Object(v["a"])(V,$,L,!1,null,null,null)),W=G.exports;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={name:"PopUpSettings",mixins:[k],components:{BasePopUp:W},data:function(){return{cache:{rowsNumber:null,colsNumber:null,minesNumber:null}}},computed:H({},Object(s["d"])(["settings"]),{minesLimit:function(){return this.cache.colsNumber*this.cache.rowsNumber-9}}),created:function(){Object.assign(this.cache,this.settings)},methods:H({},Object(s["c"])(["setPopUp","updateSettings","reset"]),{selectDifficulty:function(e){switch(e){case"Easy":this.cache={rowsNumber:9,colsNumber:9,minesNumber:10};break;case"Medium":this.cache={rowsNumber:16,colsNumber:16,minesNumber:40};break;case"Expert":this.cache={rowsNumber:16,colsNumber:30,minesNumber:99};break}},validateCache:function(){var e=this.cache;function t(t,n,r){e[t]=Math.max(n,e[t]),e[t]=Math.min(r,e[t])}for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];for(var i=0,a=r;i<a.length;i++){var o=a[i];"minesNumber"==o?t("minesNumber",10,this.minesLimit):t(o,9,100)}},restart:function(){this.reset(!0),this.fieldGenerator_generateField()},confirmChanges:function(){this.updateSettings(this.cache),this.restart(!0),this.setPopUp(null)}})},q=R,K=(n("76f8"),Object(v["a"])(q,F,M,!1,null,null,null)),Q=K.exports;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={name:"App",components:{TheTopPanel:O,TheGameField:B,PopUpSettings:Q},computed:Y({},Object(s["d"])(["popUp"])),created:function(){window.addEventListener("contextmenu",(function(e){e.preventDefault()})),window.addEventListener("selectstart",(function(e){e.preventDefault()}))}},ee=Z,te=(n("034f"),n("7fd3"),Object(v["a"])(ee,o,l,!1,null,"53d0507a",null)),ne=te.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(ne)},store:a}).$mount("#app")},"6ed1":function(e,t,n){},7308:function(e,t,n){"use strict";var r=n("8e4e"),s=n.n(r);s.a},"766f":function(e,t,n){"use strict";var r=n("b3c2"),s=n.n(r);s.a},"76f8":function(e,t,n){"use strict";var r=n("6ed1"),s=n.n(r);s.a},"7fd3":function(e,t,n){"use strict";var r=n("9b84"),s=n.n(r);s.a},"85ec":function(e,t,n){},"8e4e":function(e,t,n){},"9b84":function(e,t,n){},b3c2:function(e,t,n){},bd8c:function(e,t,n){"use strict";var r=n("5120"),s=n.n(r);s.a}});
//# sourceMappingURL=app.8317896a.js.map